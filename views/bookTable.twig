<!DOCTYPE html>
<html lang="en">
{% include "./partial/header.twig" with {
    "title": "Sách",
    "css" : 
        [
            "/css/style.css",
            "/css/table.css",
            "https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css",
        ],
} %}
<body>
{% include "./partial/nav.twig" with {"user": user, "active": 6} %}

<div class="container mb-5">
        <div>
            <h1 class="text-center header">Sách</h1>
        </div>

        <table id="bookTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th></th>
                    <th class="text-center">Tên</th>
                    <th class="text-center" style="width: 170px">Tác giả</th>
                    <th class="text-center" style="width: 130px">Thể loại</th>
                    <th class="text-center" style="width: 80px">Số lượng</th>
                    <th class="text-center">Ngày tạo</th>
                    <th class="text-center">Ngày cập nhật</th>
                    <th class="text-center" style="width: 100px">Thao tác</th>
                </tr>
            </thead>
            {% for book in books %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ book.name }}</td>
                    <td>
                        {% for author in book.author %}
                            <div class="text-center mb-2">{{ author }}</div>
                        {% endfor %}
                    </td>
                    <td>
                        {% for type in book.type %}
                            <div class="text-center mb-2">{{ type }}</div>
                        {% endfor %}
                    </td>
                    <td class="text-center">{{ book.quantity }}</td>
                    <td>{{ book.created_at }}</td>
                    <td>{{ book.updated_at }}</td>
                    <td class="d-flex flex-column align-items-center">
                            <a  class="btn btn-success mb-1" href="/updatebook/{{ book.id }}" style="width: fit-content;">
                                Cập nhật
                                <i class="fa-solid fa-pen-to-square"></i>
                            </a>
                            <button  class="btn btn-danger deleteButton" data-id="{{book.id}}" style="width: fit-content;" data-bs-toggle="modal" data-bs-target="#confirmDelete" >
                                Xóa
                                <i class="fa-solid fa-trash"></i>
                            </button>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
    <div class="modal fade " id="confirmDelete" tabindex="-1" aria-labelledby="confirmDelete" aria-hidden="true">
			<div class="modal-dialog" style="margin: 190px auto 0">
				<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="messageModalLabel">Bạn có chắc chắn muốn xóa không ?</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
					</button>
				</div>
				<div class="modal-footer">
                    <a  class="btn btn-primary">
							Có
					</a>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
							Không
					</button>
				</div>
				</div>
			</div>
		</div>
 {% include "./partial/footer.twig" %}   
</body>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
             $('#bookTable').DataTable();
        });

        $(".deleteButton").click(function() {
            $(".modal-footer a").attr("href", "/deletebook/"+$(this).attr("data-id"));
        })
    </script>
</html>